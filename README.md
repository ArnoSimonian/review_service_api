# Review service & API

## Описание
Сервис для публикации отзывов и оценок к произведениям и учета их рейтинга.

Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка», а также им может быть присвоен жанр из списка предустановленных.

Пользователи могут оставлять отзывы на произведениям, оценивать их (в диапазоне от 1 до 10) и добавлять комментарии к отзывам. Из оценок формируется усреднённая оценка произведения — рейтинг.

Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

Полная документация к API находится в файле ```api_yamdb/static/redoc.yaml``` и по эндпоинту ```/redoc/```.


## Технологии

- Python 3.9
- Django 3.2
- Django Rest Framework (DRF)
- Simple JWT
- SQLite


## Как запустить проект

1. Клонируйте репозиторий и перейдите в него в командной строке:
```bash
  git clone https://github.com/ArnoSimonian/review_service_api.git
  cd review_service_api
```

2. Cоздайте и активируйте виртуальное окружение:

```bash
  python3 -m venv venv
  # Для Linux/macOS:
  source venv/bin/activate
  # Для Windows:
  source venv/Scripts/activate
```

3. Установите зависимости из файла requirements.txt:

```bash
  python3 -m pip install --upgrade pip
  pip install -r requirements.txt
```

4. Выполните миграции и запустите проект:

```bash
  python3 manage.py migrate
  python3 manage.py runserver
```


## Пользовательские роли и права доступа

- _Аноним_ — может просматривать описания произведений, читать отзывы и комментарии.
- _Аутентифицированный пользователь (user)_ — может читать всё, как и Аноним, публиковать отзывы и ставить оценки произведениям, комментировать отзывы, редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Роль по умолчанию.
- _Модератор (moderator)_ — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- _Администратор (admin)_ — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- _Суперюзер Django_ - обладает правами Администратора.


## Ресурсы API:

- **auth**: аутентификация
- **users**: пользователи
- **titles**: произведения и информация о них
- **categories**: категории произведений
- **genres**: жанры произведений, одно произведение может иметь несколько жанров
- **reviews**: отзывы на произведения, каждый отзыв относится к определенному произведению
- **comments**: комментарии к отзывам на произведения


## Регистрация пользователя

1. Передайте на ```/api/v1/auth/signup/``` свои username и email. Использовать имя 'me' запрещено. Каждое поле должно быть уникальным. Если пользователя ещё нет в базе данных, он будет создан:

```bash
POST /api/v1/auth/signup/

{
    "email": "string",
    "username": "string"
}
```

2. На ваш email будет отправлен код подтверждения.

3. Передайте на ```/api/v1/auth/token/``` свой email и confirmation_code из письма, в ответе вы получите JWT-токен:

```bash
POST /api/v1/auth/token/

{
    "username": "string",
    "confirmation_code": "string"
}
```

## Примеры запросов к API

- Получение списка всех категорий: 

  GET ```/api/v1/categories/```

- Получение списка всех отзывов: 
  
  GET ```/api/v1/titles/{title_id}/reviews/```

- Получение пользователя: 
  
  GET ```/api/v1/users/{username}/```

- Получение данных своей учетной записи: 
  
  GET ```/api/v1/users/me/```

- Удаление категории: 
  
  DELETE ```/api/v1/categories/{slug}/```

- Добавление жанра:

  POST ```/api/v1/genres/```

```bash
  {
      "name": "string",
      "slug": "string"
  }
```

- Добавление произведения:

  POST ```/api/v1/titles/```

```bash
  {
      "name": "string",
      "year": 0,
      "description": "string",
      "genre": [
          "string"
      ],
      "category": "string"
  }
```

- Добавление пользователя:

  POST ```/api/v1/users/```

```bash
  {
      "username": "string",
      "email": "user@example.com",
      "first_name": "string",
      "last_name": "string",
      "bio": "string",
      "role": "user"
  }
```


## Команда разработки

Денис Зайчиков [@DenisZaychikov](https://github.com/DenisZaychikov) (тимлид): регистрация, подтверждение по e-mail, получение JWT-токена и управление пользователями. Права доступа.

Артур Раянов [@arturrayanov](https://github.com/arturrayanov/) (разработчик): категории, жанры и произведения: модели, view и эндпойнты. Импорт данных в базу данных из .csv файлов.

Арно Симонян [@ArnoSimonian](https://www.github.com/ArnoSimonian) (разработчик): отзывы и комментарии: модели, view и эндпойнты. Рейтинги произведений.
